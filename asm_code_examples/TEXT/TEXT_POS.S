NEW

10 HOME
11 DATA "6000","MAIN"
12 DATA "603D","TXVERT"
13 DATA "603E","TXHOR"
14 DATA "603F","TXL"
15 DATA "6040","TXH"

20 FOR I=0 TO 23
30 POKE 24576,I
40 CALL 24576 + 2
50 REM PRINT STR$(I) + " "+STR$(PEEK(26))+" "+STR$(PEEK(27))
60 DEC = PEEK(27)*256 + PEEK(26) : GOSUB 150
65 POKE DEC,I+128+48
70 NEXT I
80 END
150 REM *** DEC-HEX ***
160 B = DEC/4096 : C = INT(B) : D = INT((B-C)*16)
170 HEX$ = MID$("0123456789ABCDEF",C+1,1) + MID$("0123456789ABCDEF",D+1,1)
180 B = (DEC - C*4096 - D*256)/16 : C = INT(B)
190 HEX$ = HEX $ + MID$("0123456789ABCDEF",C+1,1) + MID$("0123456789ABCDEF",INT((B-C)*16)+1,1)
200 REM PRINT HEX$
210 RETURN

CALL -151

6000: 00 00 AC 00 60 B9 14 60
6008: 18 6D 01 60 85 1A B9 2C
6010: 60 85 1B 60 00 80 00 80
6018: 00 80 00 80 28 A8 28 A8
6020: 28 A8 28 A8 50 D0 50 D0
6028: 50 D0 50 D0 04 04 05 05
6030: 06 06 07 07 04 04 05 05
6038: 06 06 07 07 04 04 05 05
6040: 06 06 07 07

-----------------

*=$6000
IOSAVE = $FF4A
IOREST = $Ff3F

REG_A = $45
REG_X = $46
REG_Y = $47
REG_P = $48
REG_S = $49


MAIN    JSR IOSAVE   ;STORE_SNAPSHOT
        JSR TXINI  ;EXECUTE_ANY_PROGRAM_PRINT_SNAPSHOT
        JSR IOREST   ;CONTINUE_UNALTERED

PRT     LDY #23    ;LINE_23
        JSR TXADR  ;FIND_ADDRESS
        RTS

TXINI   LDY TXVERT
TXADR   LDA YTXL,Y
        CLC
        ADC TXHOR
        STA TXL     ;CAN_BE_ZEROPAGE
        LDA YTXH,Y
        STA TXH     ;CAN_BE_ZEROPAGE
        RTS

TXVERT HEX 00
TXHOR  HEX 00
TXL    HEX 00
TXH    HEX 00


YTXL  HEX 0080008000800080
      HEX 28A828A828A828A8
      HEX 50D050D050D050D0


YTXH  HEX 0404050506060707
      HEX 0404050506060707
      HEX 0404050506060707



-------------------------
TEST (ADAPT BASIC CODE!!)


6000: 20 4A FF 20 0F 60 20 3F
6008: FF A0 17 20 12 60 60 AC
6010: 23 60 B9 27 60 18 6D 24
6018: 60 8D 25 60 B9 3F 60 8D
6020: 26 60 60 00 00 00 00 00
6028: 80 00 80 00 80 00 80 28
6030: A8 28 A8 28 A8 28 A8 50
6038: D0 50 D0 50 D0 50 D0 04
6040: 04 05 05 06 06 07 07 04
6048: 04 05 05 06 06 07 07 04
6050: 04 05 05 06 06 07 07




---------------------------
0  0400
1  0480
2  0500
3  0580
4  0600
5  0680
6  0700
7  0780
8  0428
9  04A8
10 0528
11 05A8
12 0628
13 06A8
14 0728
15 07A8
16 0450
17 04D0
18 0550
19 05D0
20 0650
21 06D0
22 0750
23 07D0
----------------------------------

5 HOME
10 FOR I = 1024 TO 2047
15 N = I - 1024
20 TEN = N - 10*INT(N/10)
30 POKE I,48+TEN
35 GET A$ : IF A$ = "A" THEN DEC = I: GOSUB 150
40 NEXT I

100 REM *** MODULO A,N ***
110 M = A - N*INT(A/N)
120 RETURN
150 REM *** DEC-HEX ***
160 B = DEC/4096 : C = INT(B) : D = INT((B-C)*16)
170 HEX$ = MID$("0123456789ABCDEF",C+1,1) + MID$("0123456789ABCDEF",D+1,1)
180 B = (DEC - C*4096 - D*256)/16 : C = INT(B)
190 HEX$ = HEX $ + MID$("0123456789ABCDEF",C+1,1) + MID$("0123456789ABCDEF",INT((B-C)*16)+1,1)
200 PRINT HEX$
210 RETURN
